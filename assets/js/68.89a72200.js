(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{466:function(t,e,s){"use strict";s.r(e);var a=s(23),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"管理員帳號"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管理員帳號"}},[t._v("#")]),t._v(" 管理員帳號")]),t._v(" "),s("p",[t._v("在 Linux 中，隨意使用 root 進行操作是一件非常危險的事情，可以參考 : "),s("a",{attrs:{href:"https://www.jamescoyle.net/how-to/614-remove-the-proxmox-no-subscription-message",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitlab.com 誤刪 300G 資料，備份失效後直播搶救過程！"),s("OutboundLink")],1),t._v("，所以我們必須新增一個具有 sudo 權限的帳號來進行相關操作，並且把 root 的遠端登入權限關掉，避免遭受有心人士破壞，使用自己的帳號也可以降低被猜中帳號登入的機會。")]),t._v(" "),s("h2",{attrs:{id:"新增帳號"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新增帳號"}},[t._v("#")]),t._v(" 新增帳號")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("首先 SSH 進入 Proxmox VE 主機，並且使用 "),s("code",[t._v("adduser")]),t._v(" 新增帳號")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root@pve:~# adduser theAdminUser\n")])])])]),t._v(" "),s("li",[s("p",[t._v("將帳號加入 sudo 群組")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root@pve:~# usermod -aG sudo theAdminUser\n")])])])]),t._v(" "),s("li",[s("p",[t._v("安裝 "),s("code",[t._v("sudo")]),t._v("套件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root@pve:~# apt-get update\nroot@pve:~# apt-get install sudo \n")])])])]),t._v(" "),s("li",[s("p",[t._v("關閉 root 的 SSH 登入權限")]),t._v(" "),s("ul",[s("li",[t._v("編輯 "),s("code",[t._v("/etc/ssh/sshd_config")]),t._v("，找到")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("PermitRootLogin yes\n")])])]),s("ul",[s("li",[t._v("將其改為如下後存檔")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("PermitRootLogin no\n")])])])]),t._v(" "),s("li",[s("p",[t._v("重新載入 SSH 設定")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root@pve:~# systemctl reload ssh.service \n")])])])]),t._v(" "),s("li",[s("p",[t._v("測試一下，使用 root 進行 ssh 登入會發生什麼事情")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root@192.168.187.130's password: \nPermission denied, please try again.\nroot@192.168.187.130's password: \n")])])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);