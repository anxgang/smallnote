(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{426:function(s,t,a){"use strict";a.r(t);var n=a(23),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"rails-digitalocean-deploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rails-digitalocean-deploy"}},[s._v("#")]),s._v(" Rails DigitalOcean deploy")]),s._v(" "),a("blockquote",[a("p",[s._v("DigitalOcean 建立 Rails 伺服器設定 (未完)")])]),s._v(" "),a("h2",{attrs:{id:"一、-server-基本設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、-server-基本設定"}},[s._v("#")]),s._v(" 一、 Server 基本設定")]),s._v(" "),a("ol",[a("li",[s._v("使用DigitalOcean")]),s._v(" "),a("li",[s._v("選用最便宜的 1G ram / 25G disk / 5鎂 方案")]),s._v(" "),a("li",[s._v("建立 Droplet 當下就設定 SSH Key (可直接免密碼登入)")]),s._v(" "),a("li",[s._v("使用 ssh root@<your_ip_address> 連線至遠端 server")])]),s._v(" "),a("h3",{attrs:{id:"_1-系統更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-系統更新"}},[s._v("#")]),s._v(" 1. 系統更新")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" -y update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" -y upgrade"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" -y autoremove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2-設定時區-語言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-設定時區-語言"}},[s._v("#")]),s._v(" 2. 設定時區/語言")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" timedatectl set-timezone Asia/Taipei"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" locale-gen zh_TW zh_TW.UTF-8 en_US.UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3-安裝常用或相依套件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安裝常用或相依套件"}},[s._v("#")]),s._v(" 3. 安裝常用或相依套件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y build-essential git-core bison openssl libreadline6-dev "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nautoconf libc6-dev libpcre3-dev "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" libcurl4-nss-dev libxml2-dev libxslt-dev\nimagemagick libffi-dev\n")])])]),a("h3",{attrs:{id:"_4-安裝主要套件或服務"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-安裝主要套件或服務"}},[s._v("#")]),s._v(" 4. 安裝主要套件或服務")]),s._v(" "),a("h4",{attrs:{id:"安裝-postgresql-資料庫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安裝-postgresql-資料庫"}},[s._v("#")]),s._v(" 安裝 postgresql 資料庫")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postgresql postgresql-contrib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -i -u postgres\n$ psql\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示：設定對外連線")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ sudo vim /etc/postgresql/10/postgresql.conf -> 修改 listen_addresses = '*' \n$ sudo vim /etc/postgresql/10/pg_hba.conf -> 增加 host all all x.x.x.x/32 md5\n")])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示：修改 postgres 密碼")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ sudo su - postgres\n$ psql postgres postgres\n")])])])]),s._v(" "),a("h4",{attrs:{id:"安裝-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安裝-nginx"}},[s._v("#")]),s._v(" 安裝 nginx")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h4",{attrs:{id:"安裝-rvm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安裝-rvm"}},[s._v("#")]),s._v(" 安裝 rvm")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("curl -sSL https://get.rvm.io "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile.d/rvm.sh\n$ rvm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v(".1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h4",{attrs:{id:"安裝-rails"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安裝-rails"}},[s._v("#")]),s._v(" 安裝 rails")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ gem "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" rails -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5.2.2'")]),s._v(" -V --no-ri --no-rdoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ gem "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" bundler -V --no-ri --no-rdoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h4",{attrs:{id:"安裝-nodejs-及-npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安裝-nodejs-及-npm"}},[s._v("#")]),s._v(" 安裝 nodejs 及 npm")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://deb.nodesource.com/setup_10.x -o nodesource_setup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" nodesource_setup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs gcc g++ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" nodesource_setup.sh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h4",{attrs:{id:"安裝-yarn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安裝-yarn"}},[s._v("#")]),s._v(" 安裝 yarn")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://dl.yarnpkg.com/debian/pubkey.gpg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb https://dl.yarnpkg.com/debian/ stable main"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/apt/sources.list.d/yarn.list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\n")])])]),a("h3",{attrs:{id:"_10-確認環境是否正確"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-確認環境是否正確"}},[s._v("#")]),s._v(" 10. 確認環境是否正確")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v("\n$ ruby -v\n$ rails -v\n$ nginx -v\n$ node -v\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" -v\n")])])]),a("h3",{attrs:{id:"_11-檢查服務是否啟動"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-檢查服務是否啟動"}},[s._v("#")]),s._v(" 11. 檢查服務是否啟動")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" --status-all\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" postgresql status\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx status\n")])])]),a("h3",{attrs:{id:"_12-刪除-nginx-預設頁面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-刪除-nginx-預設頁面"}},[s._v("#")]),s._v(" 12. 刪除 nginx 預設頁面")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/nginx/sites-enabled/default\n")])])]),a("h3",{attrs:{id:"_13-為專案建立軟連結-option"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-為專案建立軟連結-option"}},[s._v("#")]),s._v(" 13. 為專案建立軟連結(option)")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("需要替換『myapp』")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/nginx/sites-enabled/default\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -nfs "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/deploy/myapp/current/config/nginx.conf"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/nginx/sites-enabled/myapp"')]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -lah /etc/nginx/sites-enabled/myapp\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("nginx 需要重啟後才會生效")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 檢查有沒有問題")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nginx -t\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新啟動")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx restart\n")])])])]),s._v(" "),a("h2",{attrs:{id:"二、-client-部署準備"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、-client-部署準備"}},[s._v("#")]),s._v(" 二、 Client 部署準備")]),s._v(" "),a("h3",{attrs:{id:"_1-安裝-capstrano"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安裝-capstrano"}},[s._v("#")]),s._v(" 1. 安裝 capstrano")]),s._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[s._v("group "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":development")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"capistrano"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 3.11'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano-rvm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 0.1.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano-rails'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 1.4'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano-bundler'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 1.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano3-puma'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 3.1.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano-rails-console'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 2.3.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  gem "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano-sidekiq'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'~> 1.0.2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ cap "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# create config/deploy.rb -> 主要設定檔")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# create config/deploy/staging.rb -> 專用設定檔")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# create config/deploy/production.rb -> 專用設定檔")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# create Capfile -> 寫需要 require 的項目")]),s._v("\n")])])]),a("h4",{attrs:{id:"設定-capfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#設定-capfile"}},[s._v("#")]),s._v(" 設定 Capfile")]),s._v(" "),a("p",[s._v("於 require 區塊加入")]),s._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/rails'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/rvm'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/bundler'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/rails/assets'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/rails/migrations'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/rails/console'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/puma'")]),s._v("\ninstall_plugin "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("Capistrano")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("Puma")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'capistrano/sidekiq'")]),s._v("\n")])])]),a("h4",{attrs:{id:"設定-deploy-rb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#設定-deploy-rb"}},[s._v("#")]),s._v(" 設定 deploy.rb")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("需要替換『myapp』和『git@example.com:me/myapp.git』")])]),s._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[s._v("lock "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~> 3.11.0"')]),s._v("\n\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myapp"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":repo_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git@example.com:me/myapp.git"')]),s._v("\n\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_threads")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_workers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":pty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":use_sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":stage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":production")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":deploy_via")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":remote_cache")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":deploy_to")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("fetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v("/"),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("fetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unix://'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v("/tmp/sockets/"),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("fetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('-puma.sock"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/tmp/pids/puma.state"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_pid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/tmp/pids/puma.pid"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_access_log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("release_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/log/puma.error.log"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_error_log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("release_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/log/puma.access.log"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ssh_options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" forward_agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w(~/.ssh/id_rsa.pub)")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_preload_app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_worker_timeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nil")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_init_active_record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Change to false when not using ActiveRecord")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":sidekiq_monit_use_sudo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default value for :linked_files is []")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":linked_files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w{\n  config/application.yml\n  config/secrets.yml\n  config/master.key\n  config/nginx.conf\n  .env\n}")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default value for linked_dirs is []")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":linked_dirs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w{\n  log\n  tmp/pids\n  tmp/cache\n  tmp/sockets\n  public/system\n}")]),s._v("\n\nnamespace "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  desc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Create Directories for Puma Pids and Socket'")]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":make_dirs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    on roles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      execute "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir '),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/tmp/sockets -p"')]),s._v("\n      execute "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir '),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/tmp/pids -p"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    before "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":make_dirs")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\nnamespace "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":deploy")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  desc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Make sure local git is in sync with remote."')]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":check_revision")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    on roles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unless")]),s._v(" `git rev"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("parse "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAD")]),s._v("` "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" `git rev"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("parse anx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("master`\n        puts "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WARNING: HEAD is not the same as anx/master"')]),s._v("\n        puts "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Run `git push` to sync changes."')]),s._v("\n      exit\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ndesc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Initial Deploy'")]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":initial")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  on roles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    before "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy:restart'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'puma:start'")]),s._v("\n    invoke "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ndesc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Restart application'")]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":restart")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    on roles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":sequence")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" wait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    invoke "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'puma:restart'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ndesc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Upload to shared/config'")]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":upload")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  on roles "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    upload"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"config/nginx.conf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/config/nginx.conf"')]),s._v("\n    upload"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"config/master.key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/config/master.key"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# upload! "config/database.yml", "#{shared_path}/config/application.yml"  #-> option')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# upload! "config/database.yml", "#{shared_path}/config/database.yml"  #-> option')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# upload! "config/secrets.yml",  "#{shared_path}/config/secrets.yml"   #-> option')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# upload! ".env",  "#{shared_path}/.env"                               #-> option')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\nbefore "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":starting")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":check_revision")]),s._v("\nafter  "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":finishing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":compile_assets")]),s._v("\nafter  "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":finishing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":cleanup")]),s._v("\nafter  "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":finishing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":restart")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ndesc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Run rake db:seed on a remote server."')]),s._v("\ntask "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":seed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  on roles "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    within release_path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      with rails_env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":rails_env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        execute "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":rake")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db:seed"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\nnamespace "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":logs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  desc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tail rails logs"')]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":rails")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    on roles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      execute "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tail -f '),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v("/log/"),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("fetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":rails_env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('.log"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  desc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tail sidekiq logs"')]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":sidekiq")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    on roles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      execute "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tail -f '),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/log/sidekiq.log"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])])]),a("h4",{attrs:{id:"設定-produciton-rb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#設定-produciton-rb"}},[s._v("#")]),s._v(" 設定 produciton.rb")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("需替換 主機IP 『111.111.111.111』")])]),s._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[s._v("set "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":stage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":production")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":master")]),s._v("\n\nrole "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w(deploy@111.111.111.111)")]),s._v("\nrole "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":web")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w(deploy@111.111.111.111)")]),s._v("\nrole "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":db")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w(deploy@111.111.111.111)")]),s._v("\n\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":rails_env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#[puma]")]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_config_file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/config/puma.rb"')]),s._v("\nset "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":puma_conf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/config/puma.rb"')]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("如需要也可設定 staging.rb")])]),s._v(" "),a("h3",{attrs:{id:"_2-設定-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-設定-nginx"}},[s._v("#")]),s._v(" 2. 設定 nginx")]),s._v(" "),a("p",[s._v("放在 config/nginx.conf")]),s._v(" "),a("div",{staticClass:"language-conf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('upstream rails_myapp {  \n  server unix:///home/deploy/myapp/shared/tmp/sockets/myapp-puma.sock;\n  #server myapp:3000; #-> option  可改用port連\n} \nserver {  \n  # define your domain  \n  # server_name www.example.com;   \n  # define the public application root  \n  root   /home/deploy/myapp/current/public;  \n  index  index.html;\n  # define where Nginx should write its logs  \n  access_log /home/deploy/myapp/current/log/nginx.access.log;  \n  error_log /home/deploy/myapp/current/log/nginx.error.log;   \n    \n  # deny requests for files that should never be accessed  \n  location ~ /\\. {    \n      deny all;  \n  }\n  location ~* ^.+\\.(rb|log)$ {    \n      deny all;  \n  }  \n\n  # serve static (compiled) assets directly if they exist (for rails production)  \n  location ~ ^/(assets|images|javascripts|stylesheets|swfs|system)/   {    \n    try_files $uri @rails;     \n    access_log off;    \n    gzip_static on; \n    # to serve pre-gzipped version     \n    expires max;    \n    add_header Cache-Control public;     \n    \n    add_header Last-Modified "";    \n    add_header ETag "";    \n    break;  \n  } \n  \n  # send non-static file requests to the app server  \n  location / {    \n    try_files $uri @rails;  \n  }   \n  location @rails {    \n    proxy_set_header  X-Real-IP  $remote_addr;    \n    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;         \n    proxy_set_header Host $http_host;    \n    proxy_redirect off;    \n    proxy_pass http://rails_myapp;  \n  }\n  location /cable {\n    proxy_pass http://rails_myapp;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n  }\n\n  error_page 500 502 503 504 /500.html;\n  client_max_body_size 10M;\n  keepalive_timeout 10;\n}\n')])])]),a("h2",{attrs:{id:"三、-開始部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、-開始部署"}},[s._v("#")]),s._v(" 三、 開始部署")]),s._v(" "),a("h3",{attrs:{id:"首次部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首次部署"}},[s._v("#")]),s._v(" 首次部署")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('$ git add .\n$ git commit -m "commit message"\n$ git push origin master\n')])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cap production deploy:check\ncap production deploy:upload\ncap production deploy:initial\n")])])]),a("p",[s._v("option")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cap production seed\n")])])]),a("h3",{attrs:{id:"常態部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常態部署"}},[s._v("#")]),s._v(" 常態部署")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('$ git add .\n$ git commit -m "commit message"\n$ git push origin master\n$ cap production deploy\n')])])]),a("h3",{attrs:{id:"部署疑難雜症"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署疑難雜症"}},[s._v("#")]),s._v(" 部署疑難雜症")]),s._v(" "),a("h4",{attrs:{id:"錯誤1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#錯誤1"}},[s._v("#")]),s._v(" 錯誤1")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("Missing "),a("code",[s._v("secret_key_base")]),s._v(" for 'production' environment, set this string with "),a("code",[s._v("rails credentials:edit")])])]),s._v(" "),a("p",[s._v("在環境變數上加上"),a("code",[s._v("SECRET_KEY_BASE")]),s._v(" (可使用 "),a("code",[s._v("rake secret")]),s._v(" 產生)")]),s._v(" "),a("p",[s._v("並於 "),a("code",[s._v("deploy.rb")]),s._v(" 中， 將 "),a("code",[s._v("master.key")]),s._v(" 加入 "),a("code",[s._v("linked_files")]),s._v("，並上傳至 "),a("code",[s._v("shared/config")]),s._v(" 資料夾")]),s._v(" "),a("h6",{attrs:{id:"deploy-rb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-rb"}},[s._v("#")]),s._v(" deploy.rb")]),s._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[s._v("set "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":linked_files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("%w{\n  config/master.key \n}")]),s._v("\n\ndesc "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Upload to shared/config'")]),s._v("\n  task "),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":upload")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  on roles "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    upload"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"config/master.key "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("shared_path"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('/config/master.key "')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("master.key 依照您 env 的紀錄方式，還可改為")]),s._v(" "),a("ol",[a("li",[s._v("master.key (Rails5.2預設)")]),s._v(" "),a("li",[s._v("secret.yml (Ralis5.1內建，相容5.2up)")]),s._v(" "),a("li",[s._v("application.yml ("),a("a",{attrs:{href:"https://github.com/laserlemon/figaro",target:"_blank",rel:"noopener noreferrer"}},[s._v("gem figaro"),a("OutboundLink")],1),s._v(")")]),s._v(" "),a("li",[s._v(".env ("),a("a",{attrs:{href:"https://github.com/bkeepers/dotenv",target:"_blank",rel:"noopener noreferrer"}},[s._v("gem dotenv"),a("OutboundLink")],1),s._v(")")])])]),s._v(" "),a("h4",{attrs:{id:"錯誤2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#錯誤2"}},[s._v("#")]),s._v(" 錯誤2")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("Uglifier::Error: Unexpected token: keyword (const). To use ES6 syntax, harmony mode must be enabled with Uglifier.new(:harmony => true).")])]),s._v(" "),a("p",[s._v("production.rb\nconfig.assets.js_compressor = :uglifier\nconfig.assets.js_compressor =  Uglifier.new(:harmony => true)")]),s._v(" "),a("h4",{attrs:{id:"錯誤3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#錯誤3"}},[s._v("#")]),s._v(" 錯誤3")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("PG::ConnectionBad: fe_sendauth: no password supplied")])]),s._v(" "),a("p",[s._v("postgresql驗證問題，查看 "),a("code",[s._v("database.yml")]),s._v(" 確認密碼是否輸入正確")]),s._v(" "),a("h2",{attrs:{id:"四、調整網址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、調整網址"}},[s._v("#")]),s._v(" 四、調整網址")]),s._v(" "),a("h2",{attrs:{id:"五、維運"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、維運"}},[s._v("#")]),s._v(" 五、維運")])])}),[],!1,null,null,null);t.default=e.exports}}]);